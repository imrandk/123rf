let observer,collectedData=[],isCollecting=!1;function collectTableData(){const t=document.querySelector("#upload-queue-table-body");t?t.querySelectorAll("tr").forEach((t=>{let e=[];t.querySelectorAll("td").forEach((t=>{e.push(t.textContent.trim())})),collectedData.push(e.join(" "))})):console.log("Table body not found! Waiting for the table...")}function startObserving(){const t=document.body;observer=new MutationObserver((function(t,e){for(const e of t)if("childList"===e.type){document.querySelector("#upload-queue-table-body")&&isCollecting&&collectTableData()}})),observer.observe(t,{childList:!0,subtree:!0})}function startCollecting(){isCollecting?console.log("Data collection is already running!"):(isCollecting=!0,collectedData=[],console.log("Data collection started. The script will automatically collect data when the table is found."),startObserving(),collectTableData())}function stopCollecting(){isCollecting=!1,observer&&observer.disconnect(),displayCollectedData()}function displayCollectedData(){const t=document.createElement("div");t.id="data-container",t.style.position="fixed",t.style.top="60px",t.style.left="50%",t.style.transform="translateX(-50%)",t.style.width="80%",t.style.maxWidth="600px",t.style.backgroundColor="#fff",t.style.padding="20px",t.style.border="2px solid #007BFF",t.style.borderRadius="10px",t.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.2)",t.style.zIndex="1000",t.style.overflowY="scroll",t.style.maxHeight="80vh";const e=document.createElement("textarea");e.value=collectedData.join("\n"),e.style.width="100%",e.style.height="200px",e.style.marginTop="10px",e.style.padding="10px",e.style.fontSize="16px",e.style.border="2px solid #007BFF",e.style.borderRadius="5px",e.style.boxSizing="border-box",t.appendChild(e);const o=document.createElement("button");o.textContent="Copy",o.style.marginTop="10px",o.style.padding="10px 20px",o.style.backgroundColor="#007BFF",o.style.color="#fff",o.style.border="none",o.style.borderRadius="5px",o.style.cursor="pointer",o.addEventListener("click",(()=>{navigator.clipboard.writeText(e.value).then((()=>{console.log("Data copied to clipboard successfully!"),document.body.removeChild(t)})).catch((t=>{console.error("Failed to copy data to clipboard:",t)}))})),t.appendChild(o);const l=document.createElement("p");l.textContent=`Total lines collected: ${collectedData.length}`,l.style.marginTop="10px",l.style.fontSize="14px",l.style.color="#333",t.appendChild(l),document.body.appendChild(t)}const controlPanel=document.createElement("div");controlPanel.id="control-panel",controlPanel.style.position="fixed",controlPanel.style.top="10px",controlPanel.style.left="50%",controlPanel.style.transform="translateX(-50%)",controlPanel.style.backgroundColor="#fff",controlPanel.style.padding="10px",controlPanel.style.border="1px solid #ccc",controlPanel.style.borderRadius="5px",controlPanel.style.boxShadow="0 4px 8px rgba(0, 0, 0, 0.2)",controlPanel.style.zIndex="1001",controlPanel.style.display="flex",controlPanel.style.gap="10px";const startButton=document.createElement("button");startButton.textContent="Start Collecting",startButton.style.padding="10px 20px",startButton.style.backgroundColor="#28a745",startButton.style.color="#fff",startButton.style.border="none",startButton.style.borderRadius="5px",startButton.style.cursor="pointer",startButton.addEventListener("click",startCollecting);const stopButton=document.createElement("button");stopButton.textContent="Stop and Show Data",stopButton.style.padding="10px 20px",stopButton.style.backgroundColor="#dc3545",stopButton.style.color="#fff",stopButton.style.border="none",stopButton.style.borderRadius="5px",stopButton.style.cursor="pointer",stopButton.addEventListener("click",stopCollecting),controlPanel.appendChild(startButton),controlPanel.appendChild(stopButton),document.body.appendChild(controlPanel);
