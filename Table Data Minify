let observer,collectedData=[],isCollecting=!1;function collectTableData(){const t=document.querySelector("#upload-queue-table-body");t&&t.querySelectorAll("tr").forEach((t=>{const e=Array.from(t.querySelectorAll("td")).map((t=>t.textContent.trim())).join(" ");collectedData.includes(e)||collectedData.push(e)}))}function startObserving(){observer=new MutationObserver((()=>{document.querySelector("#upload-queue-table-body")&&isCollecting&&collectTableData()})),observer.observe(document.body,{childList:!0,subtree:!0})}function startCollecting(){isCollecting||(isCollecting=!0,collectedData=[],startObserving(),collectTableData())}function stopCollecting(){isCollecting=!1,observer&&observer.disconnect(),displayCollectedData()}function displayCollectedData(){const t=document.createElement("div");t.id="data-container",Object.assign(t.style,{position:"fixed",top:"60px",left:"50%",transform:"translateX(-50%)",width:"80%",maxWidth:"600px",backgroundColor:"#fff",padding:"20px",border:"2px solid #007BFF",borderRadius:"10px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",zIndex:"1000",overflowY:"scroll",maxHeight:"80vh"});const e=document.createElement("textarea");e.value=collectedData.join("\n"),Object.assign(e.style,{width:"100%",height:"200px",marginTop:"10px",padding:"10px",fontSize:"16px",border:"2px solid #007BFF",borderRadius:"5px",boxSizing:"border-box"}),t.appendChild(e);const o=document.createElement("button");o.textContent="Copy",Object.assign(o.style,{marginTop:"10px",padding:"10px 20px",backgroundColor:"#007BFF",color:"#fff",border:"none",borderRadius:"5px",cursor:"pointer"}),o.addEventListener("click",(()=>{navigator.clipboard.writeText(e.value).then((()=>document.body.removeChild(t)))})),t.appendChild(o);const n=document.createElement("p");n.textContent=`Total lines collected: ${collectedData.length}`,Object.assign(n.style,{marginTop:"10px",fontSize:"14px",color:"#333"}),t.appendChild(n),document.body.appendChild(t)}const controlPanel=document.createElement("div");controlPanel.id="control-panel",Object.assign(controlPanel.style,{position:"fixed",top:"10px",left:"50%",transform:"translateX(-50%)",backgroundColor:"#fff",padding:"10px",border:"1px solid #ccc",borderRadius:"5px",boxShadow:"0 4px 8px rgba(0, 0, 0, 0.2)",zIndex:"1001",display:"flex",gap:"10px"});const startButton=document.createElement("button");startButton.textContent="Start Collecting",Object.assign(startButton.style,{padding:"10px 20px",backgroundColor:"#28a745",color:"#fff",border:"none",borderRadius:"5px",cursor:"pointer"}),startButton.addEventListener("click",startCollecting);const stopButton=document.createElement("button");stopButton.textContent="Stop and Show Data",Object.assign(stopButton.style,{padding:"10px 20px",backgroundColor:"#dc3545",color:"#fff",border:"none",borderRadius:"5px",cursor:"pointer"}),stopButton.addEventListener("click",stopCollecting),controlPanel.appendChild(startButton),controlPanel.appendChild(stopButton),document.body.appendChild(controlPanel);
